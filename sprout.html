<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPROUTBOT - Функції бота</title>
  <link rel="stylesheet" href="sprout.css">
  <!-- Підключення Axios -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <header>
    <h1>SPROUTBOT</h1>
    <img src="https://multifruit.carrd.co/assets/images/image04.png" alt="SPROUTBOT" />
  </header>

  <main>
    <div class="container">
      <section>
        <h2>Функції, які працюють на сервері:</h2>
        <ul>
          <li><code>/verifybrawlstars</code> — Підтвердження акаунту Brawl Stars</li>
          <li><code>/profile</code> — Перегляд профілю користувача</li>
          <li><code>/stats</code> — Статистика гравця</li>
          <li><code>/mastery</code> — Перевірка рівня майстерності</li>
        </ul>
      </section>

      <!-- Секція для відображення подій -->
      <section>
        <h2>Наступні події:</h2>
        <div id="events-container">
          <p>Завантаження подій...</p>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <p>&copy; 2024 SPROUTBOT. Всі права захищені.</p>
  </footer>

  <script>
    // Функція для отримання подій з API Brawlify
    function fetchEvents() {
      axios.get('https://api.brawlify.com/v1/events')
        .then(function (response) {
          const events = response.data; // Отримуємо дані подій з відповіді
          const eventsContainer = document.getElementById('events-container');
          eventsContainer.innerHTML = ''; // Очищаємо контейнер перед виведенням нових даних

          if (events && events.length > 0) {
            // Якщо події є, виводимо їх
            events.forEach(event => {
              const eventElement = document.createElement('div');
              eventElement.classList.add('event');

              const startTime = new Date(event.startTime).toLocaleString();
              const endTime = new Date(event.endTime).toLocaleString();

              eventElement.innerHTML = `
                <h3>${event.slot.name} ${event.slot.emoji || ''}</h3>
                <p><strong>Час початку:</strong> ${startTime}</p>
                <p><strong>Час завершення:</strong> ${endTime}</p>
                <p><strong>Мапа:</strong> <a href="${event.map.link}" target="_blank">${event.map.name}</a></p>
                <img src="${event.map.imageUrl}" alt="${event.map.name}" style="max-width: 100px; border-radius: 8px;">
              `;

              eventsContainer.appendChild(eventElement);
            });
          } else {
            eventsContainer.innerHTML = '<p>Подій наразі немає.</p>';
          }
        })
        .catch(function (error) {
          console.error('Error fetching events:', error);
          const eventsContainer = document.getElementById('events-container');
          eventsContainer.innerHTML = '<p>Сталася помилка при завантаженні подій.</p>';
        });
    }

    // Завантаження подій при завантаженні сторінки
    window.onload = function() {
      fetchEvents();
    };
  </script>
</body>
</html>